{
  "version": "1.0.0",
  "generated_at": "2026-01-26",
  "description": "Allowlist for mock/fake/stub patterns. Includes permanent (true boundaries) and transitional (scheduled for removal)",
  "entries": [
    {
      "path": "src/search/daemon_client.rs",
      "pattern": "MockEmbedder",
      "rationale": "Unit tests for Embedder trait behavior without requiring ONNX runtime",
      "owner": "search-team",
      "review_date": "2026-04-26",
      "downstream_task": "bd-66i4",
      "cfg_test_only": true,
      "permanent": true
    },
    {
      "path": "src/search/daemon_client.rs",
      "pattern": "MockReranker",
      "rationale": "Unit tests for Reranker trait behavior without requiring ONNX runtime",
      "owner": "search-team",
      "review_date": "2026-04-26",
      "downstream_task": "bd-66i4",
      "cfg_test_only": true,
      "permanent": true
    },
    {
      "path": "src/search/daemon_client.rs",
      "pattern": "MockDaemon",
      "rationale": "Tests daemon retry/fallback logic without requiring a real daemon process",
      "owner": "search-team",
      "review_date": "2026-04-26",
      "downstream_task": "bd-66i4",
      "cfg_test_only": true,
      "permanent": true
    },
    {
      "path": "src/search/daemon_client.rs",
      "pattern": "mock_audit",
      "rationale": "Comment referencing no_mock_audit.md documentation",
      "owner": "search-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Documentation comment, not mock code"
    },
    {
      "path": "src/search/embedder.rs",
      "pattern": "Mock",
      "rationale": "Unit tests for Embedder trait abstraction",
      "owner": "search-team",
      "review_date": "2026-04-26",
      "cfg_test_only": true,
      "permanent": true
    },
    {
      "path": "src/search/embedder.rs",
      "pattern": "mock_audit",
      "rationale": "Comment referencing no_mock_audit.md documentation",
      "owner": "search-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Documentation comment, not mock code"
    },
    {
      "path": "src/search/reranker.rs",
      "pattern": "Mock",
      "rationale": "Unit tests for Reranker trait abstraction",
      "owner": "search-team",
      "review_date": "2026-04-26",
      "cfg_test_only": true,
      "permanent": true
    },
    {
      "path": "src/search/reranker.rs",
      "pattern": "mock_audit",
      "rationale": "Comment referencing no_mock_audit.md documentation",
      "owner": "search-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Documentation comment, not mock code"
    },
    {
      "path": "src/search/query.rs",
      "pattern": "mocking",
      "rationale": "Comment describing test approach (mentions mocking time)",
      "owner": "search-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Documentation comment about test approach"
    },
    {
      "path": "tests/daemon_client_integration.rs",
      "pattern": "Channel",
      "rationale": "Integration test harness using real channel communication (not a true mock)",
      "owner": "search-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "This is a test harness, not a mock - exercises real code paths"
    },
    {
      "path": "src/pages/redact.rs",
      "pattern": "fake",
      "rationale": "Feature functionality - redact page intentionally replaces real usernames with fake ones for privacy",
      "owner": "pages-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "This is product functionality, not test infrastructure"
    },
    {
      "path": "tests/e2e_install_easy.rs",
      "pattern": "fake_bin",
      "rationale": "PERMANENT: Fast local test for install.sh script logic. Real install verification runs in CI via .github/workflows/install-test.yml with actual Rust tooling",
      "owner": "infra-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Fake rustc/cargo/sha256sum binaries allow fast isolated testing of install script logic. Full real-world install testing runs in CI workflow install-test.yml on Linux and macOS"
    },
    {
      "path": "src/sources/install.rs",
      "pattern": "mock_system_info",
      "rationale": "PERMANENT: Fixture constructor for testing pure install method selection logic with deterministic inputs",
      "owner": "sources-team",
      "review_date": "2026-07-26",
      "cfg_test_only": true,
      "permanent": true,
      "note": "Creates test SystemInfo struct for unit testing choose_method() and related pure functions. Not a mock - just structured test data"
    },
    {
      "path": "src/sources/install.rs",
      "pattern": "mock_resources",
      "rationale": "PERMANENT: Fixture constructor for testing pure resource checking logic with deterministic inputs",
      "owner": "sources-team",
      "review_date": "2026-07-26",
      "cfg_test_only": true,
      "permanent": true,
      "note": "Creates test ResourceInfo struct for unit testing check_resources() and can_compile(). Not a mock - just structured test data"
    },
    {
      "path": "src/sources/interactive.rs",
      "pattern": "mockup",
      "rationale": "Documentation comment referencing bead spec mockup (not actual mock code)",
      "owner": "sources-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "This is a comment, not mock infrastructure"
    },
    {
      "path": "tests/connector_claude.rs",
      "pattern": "mock_claude",
      "rationale": "TRANSITIONAL: Mock directory structure for connector testing (variable name)",
      "owner": "connectors-team",
      "review_date": "2026-03-26",
      "downstream_task": "bd-1dfc",
      "transitional": true
    },
    {
      "path": "tests/fs_errors.rs",
      "pattern": "mock_claude",
      "rationale": "TRANSITIONAL: Mock directory for filesystem error testing (variable name)",
      "owner": "connectors-team",
      "review_date": "2026-03-26",
      "downstream_task": "bd-1dfc",
      "transitional": true
    },
    {
      "path": "src/ui/tui.rs",
      "pattern": "MockHit",
      "rationale": "TRANSITIONAL: Mock search hit for TUI testing",
      "owner": "ui-team",
      "review_date": "2026-03-26",
      "downstream_task": "bd-1c25",
      "cfg_test_only": true,
      "transitional": true
    },
    {
      "path": "src/ui/tui.rs",
      "pattern": "MockPane",
      "rationale": "TRANSITIONAL: Mock pane for TUI testing",
      "owner": "ui-team",
      "review_date": "2026-03-26",
      "downstream_task": "bd-1c25",
      "cfg_test_only": true,
      "transitional": true
    },
    {
      "path": "tests/e2e_cli_flows.rs",
      "pattern": "no mocks",
      "rationale": "Documentation comment stating tests use no mocks (false positive)",
      "owner": "e2e-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "This is a comment documenting that tests DON'T use mocks"
    },
    {
      "path": "tests/search_pipeline.rs",
      "pattern": "no mocks",
      "rationale": "Documentation comment stating tests use no mocks (false positive)",
      "owner": "search-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "This is a comment documenting that tests DON'T use mocks"
    },
    {
      "path": "tests/e2e_search_index.rs",
      "pattern": "no mocks",
      "rationale": "Documentation comment stating tests use no mocks (false positive)",
      "owner": "e2e-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "This is a comment documenting that tests DON'T use mocks"
    },
    {
      "path": "tests/accessibility/axe-core.test.js",
      "pattern": "mocking",
      "rationale": "Comment about potential test approaches (mentions mocking auth)",
      "owner": "a11y-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Documentation comment, not actual mock code"
    },
    {
      "path": "tests/e2e/exports/test-tool-calls.html",
      "pattern": "mocking",
      "rationale": "JavaScript comment about testing approaches in HTML export",
      "owner": "html-export-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Comment in test fixture, not mock infrastructure"
    },
    {
      "path": "tests/pages_bundle.rs",
      "pattern": "fake_config",
      "rationale": "TRANSITIONAL: Fake configuration for bundle testing",
      "owner": "pages-team",
      "review_date": "2026-03-26",
      "downstream_task": "bd-1dfc",
      "transitional": true
    },
    {
      "path": "src/connectors/chatgpt.rs",
      "pattern": "mocking",
      "rationale": "Comment about platform-specific test approach",
      "owner": "connectors-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Documentation comment about testing HOME env var"
    },
    {
      "path": "src/connectors/cursor.rs",
      "pattern": "mocking",
      "rationale": "Comment explaining why mocking is avoided in this test",
      "owner": "connectors-team",
      "review_date": "2026-07-26",
      "permanent": true,
      "note": "Documentation comment explaining test design"
    }
  ],
  "excluded_paths": [
    "node_modules/",
    "target/",
    ".git/",
    "tests/fixtures/",
    "test-results/"
  ],
  "excluded_patterns": [
    "mock-.*\\.jsonl$",
    "mock-.*\\.html$"
  ],
  "notes": [
    "Entries with permanent: true are allowed indefinitely (true OS/hardware boundaries or false positives)",
    "Entries with transitional: true are scheduled for removal and must have a downstream_task",
    "Review dates for transitional entries are hard deadlines for completing removal",
    "See test-results/no_mock_audit.md for full audit report",
    "Comments that mention 'mock' or 'no mocks' are marked permanent as they are documentation, not mock code"
  ]
}
